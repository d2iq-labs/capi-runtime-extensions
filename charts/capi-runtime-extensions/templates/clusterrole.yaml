# Copyright 2023 D2iQ, Inc. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
{{ include "chart.labels" . | indent 4 }}
  name: {{ include "chart.name" . }}
rules:
- apiGroups: [""]
  resources: ["namespaces", "configmaps", "secrets"]
  verbs: ["watch", "list", "get", "create", "patch", "update", "delete"]
- apiGroups:
    - addons.cluster.x-k8s.io
    - bootstrap.cluster.x-k8s.io
    - clusterctl.cluster.x-k8s.io
    - controlplane.cluster.x-k8s.io
    - infrastructure.cluster.x-k8s.io
    - ipam.cluster.x-k8s.io
    - runtime.cluster.x-k8s.io
  resources: ["*"]
  verbs: ["watch", "list", "get", "create", "patch", "update", "delete"]
- apiGroups:
    - source.toolkit.fluxcd.io
  resources: ["helmrepositories"]
  verbs: ["watch", "list", "get", "create", "patch", "update", "delete"]
- apiGroups:
    - helm.toolkit.fluxcd.io
  resources: ["helmreleases"]
  verbs: ["watch", "list", "get", "create", "patch", "update", "delete"]
